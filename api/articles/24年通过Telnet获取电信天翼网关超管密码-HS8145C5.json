{"title":"24年通过Telnet获取电信天翼网关超管密码-HS8145C5","uid":"14481fc6a214971b0e61858be70bd50e","slug":"24年通过Telnet获取电信天翼网关超管密码-HS8145C5","date":"2024-02-06T04:40:00.000Z","updated":"2024-02-06T04:44:03.342Z","comments":true,"path":"api/articles/24年通过Telnet获取电信天翼网关超管密码-HS8145C5.json","keywords":null,"cover":[],"content":"<link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"\\assets\\css\\APlayer.min.css\"><script src=\"\\assets\\js\\APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><p><meting-js\n    server=\"netease\"\n    type=\"playlist\"\n    autoplay=\"true\"\n    fixed=\"true\"\n    mutex=\"false\"\n    order=\"random\"\n    id=\"35558753\"><br></meting-js></p>\n<h1 id=\"前言\"><a href=\"#前言\" class=\"headerlink\" title=\"前言\"></a>前言</h1><p>家里用的是中国电信诈骗的网自然也是用它的光猫 型号版本为HS8145C5 V5.19.C20S050<br>之前超管的密码一直都是默认的<code>nE7jA%5m</code>，结果24年开年没多久突然想登超管后台看一下日志排查问题，结果发现被下发配置了，密码被改了（我TM谢谢你中国电信）于是踏上了get password的旅程😅<br>网上的方法有很多，比如经典的<strong>F12</strong>大法，以及<strong>BurpSuite</strong>抓改包USB欺骗大法，但毕竟是BUG，<del>BUG就TM的活不久</del>，基本上都被Fixed了(<br>不过天灾(BUG)是天灾，人祸就是另一回事了，那么我们的入手点就来到了亲爱的Dev留下的BackDoor(Telnet)上了喵😋<br>接下来我们将通过Huawei内部工具通过Telnet获取超管密码。</p>\n<h1 id=\"准备工作\"><a href=\"#准备工作\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h1><h2 id=\"系统准备\"><a href=\"#系统准备\" class=\"headerlink\" title=\"系统准备\"></a>系统准备</h2><p>以Win11为例:</p>\n<ol>\n<li>依此打开设置-&gt;系统-&gt;可选功能-&gt;(相关设置)更多Windows功能</li>\n<li>分别启用Telnet 客户端 和 TFTP 客户端，如下图<br> <img src=\"/image/Pasted%20image%2020240205221119.png\"></li>\n</ol>\n<h2 id=\"软件准备\"><a href=\"#软件准备\" class=\"headerlink\" title=\"软件准备\"></a>软件准备</h2><p>下载下面给出的软件</p>\n<ol>\n<li><p>华为ONT相关工具 <a href=\"https://pan.baidu.com/s/1NYNVbRhDkHNv-3enw7V8Bw\">原链(百度网盘)</a>  提取码:brpa 感谢相随666大佬的整理 <a href=\"https://pan.baidu.com/s/1JvsiVqDoSH9KSmHAaQ0A0Q?pwd=brpa\">存档</a><br> 下载图下俩个即可:<br> <img src=\"/image/Pasted%20image%2020240205224343.png\"></p>\n</li>\n<li><p>Tftpd64<br> 访问<a href=\"https://bitbucket.org/phjounin/tftpd64/wiki/Download%20Tftpd64\">phjounin &#x2F; tftpd64 &#x2F; wiki &#x2F; Download Tftpd64 — Bitbucket</a>根据需要下载x64或x86版本，当然也可以使用上面百度网盘给出的版本</p>\n</li>\n</ol>\n<p>下载完以上的软件后我们运行Tftpd<br>第一项填待会文件保存的位置<br>第二项选择自己连接光猫的网卡<br>下方选择Tftp Server然后保持在后台不要关闭喵</p>\n<h1 id=\"开启Telnet\"><a href=\"#开启Telnet\" class=\"headerlink\" title=\"开启Telnet\"></a>开启Telnet</h1><ol>\n<li><p>电脑连接光猫，中间可以过交换机，路由器没试过不知道行不行</p>\n</li>\n<li><p>拔掉光猫的光纤，其他网线包括IPTV，还有电话线，确保只剩下连接电脑的那根线</p>\n</li>\n<li><p>回到电脑 <strong>win+r键</strong> 输入 <code>cmd</code> 打开命令提示符 输入 <code>ping -t 192.168.1.1</code>(根据你光猫的IP填写，用于待会判断光猫什么时候重启完成)回车后可以看到在不停的ping路由器</p>\n</li>\n<li><p>查看光猫版本，浏览器打开光猫管理界面如192.168.1.1:8080输入光猫后面的密码进入有限的设置界面查看版本 如图为<strong>V5.19.C20S050</strong> 则光猫版本为<strong>V5</strong> </p>\n<p> :::tip<br> 不要看光猫外壳上面写着3.0，4.0什么的，以上面获取的版本为准(踩坑😭)<br> :::<br> <img src=\"/image/Pasted%20image%2020240206010244.png\"></p>\n</li>\n<li><p>打开华为ONT工具<br> 根据刚刚获取到的版本选择使能模式，网卡选择连接光猫的网卡<br> <img src=\"/image/Pasted%20image%2020240206011311.png\"></p>\n</li>\n<li><p>接下来重启光猫，此时 命令提示符 那边会报 <strong>连接超时</strong> </p>\n</li>\n<li><p>等到 命令提示符 那边重新能ping到光猫后表面光猫重启完成，此时按下 ONT工具 中的 <strong>启动</strong> 开始开启光猫的 <strong>Telnet</strong><br> 等到出现下图 <strong>设备列表</strong> 显示<strong>Success</strong>则开启成功，此时光猫指示灯长亮<br> <img src=\"/image/Pasted%20image%2020240206110341.png\"></p>\n<p> :::tip<br> 如果一次不成功多试几次，重启一次可以进行2~3次<br> :::</p>\n</li>\n<li><p>接着再重启光猫，等待光猫重启完成</p>\n</li>\n</ol>\n<h1 id=\"通过Telnet连接光猫并获取权限\"><a href=\"#通过Telnet连接光猫并获取权限\" class=\"headerlink\" title=\"通过Telnet连接光猫并获取权限\"></a>通过Telnet连接光猫并获取权限</h1><ol>\n<li><p>运行<strong>cmd</strong>或<strong>PowerShell</strong>，这里以Windows终端(PowerShell)为例<br> <img src=\"/image/Pasted%20image%2020240206111144.png\"><br> 输入 <code>telnet 你光猫IP(如192.168.1.1)</code> 连接光猫<br> 连接成功后显示</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Welcome Visiting Huawei Home Gateway</span><br><span class=\"line\">Copyright by Huawei Technologies Co., Ltd.</span><br><span class=\"line\"></span><br><span class=\"line\">Login:</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p> <strong>Login</strong>即输入用户名这里输入<code>root</code><br> 接下来会要求输入<strong>Password</strong>输入<code>admin</code>或<code>adminHW</code></p>\n<p> :::tip<br> 有些终端不一定显示你输入的密码，不用担心<br> 不是没输到啊喂(<br> :::<br> 输入密码后显示</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Welcome Visiting Huawei Home Gateway</span><br><span class=\"line\">Copyright by Huawei Technologies Co., Ltd.</span><br><span class=\"line\"></span><br><span class=\"line\">Login:root</span><br><span class=\"line\">Password:</span><br><span class=\"line\">WAP&gt;</span><br></pre></td></tr></table></figure>\n<p> 恭喜你已经进入光猫的终端，不过仅仅这样是不够的，我们还要进行提权操作😋</p>\n</li>\n<li><p>输入 <code>su</code> 进行提权提示 <strong>success!</strong> 后进入<strong>SU_WAP</strong>权限，接下来进行<strong>补全shell</strong></p>\n</li>\n<li><p>输入 <code>shell</code> 显示</p>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">BusyBox v1.26.2 () built-in shell (ash)</span><br><span class=\"line\">Enter &#x27;help&#x27; for a list of built-in commands.</span><br><span class=\"line\">\t</span><br><span class=\"line\">profile close core dump</span><br><span class=\"line\">WAP(Dopra Linux) #</span><br><span class=\"line\">\t</span><br></pre></td></tr></table></figure>\n<p> 可以看到是基于<strong>Dopra Linux</strong>开发的，实际上到这一步我们就可以对光猫为所欲为了 <del>先来个rm -rf &#x2F;</del> (你可别真去试啊😨)</p>\n<p> :::danger<br> 目前你已经拿到root权限这意味着接下来你&#x3D;&#x3D;必须&#x3D;&#x3D;<strong>小心谨慎</strong>操作<br> 数据无价，失手成砖<br> 你已经被警告过了!<br> :::</p>\n</li>\n</ol>\n<h1 id=\"通过Telnet-amp-Tftp64获取光猫配置文件\"><a href=\"#通过Telnet-amp-Tftp64获取光猫配置文件\" class=\"headerlink\" title=\"通过Telnet&amp;Tftp64获取光猫配置文件\"></a>通过Telnet&amp;Tftp64获取光猫配置文件</h1><ol>\n<li>输入 <code>cd /mnt/jffs2</code>进入光猫配置存放文件夹<br> 如果报错先 <code>cd /mnt</code> 进入<strong>mnt</strong>文件夹再输入 <code>ls</code> 查看当前目录下的文件夹与文件查找类似于<strong>jffs2</strong>的文件夹，<code>cd  文件夹名称</code>进去<br> <img src=\"/image/Pasted%20image%2020240206120115.png\"><br> 进去后<strong>hw_ctree.xml</strong>就是我们要的文件😋<img src=\"/image/Pasted%20image%2020240206120308.png\"></li>\n<li>输入<code>tftp -p -l hw_ctree.xml 你电脑的ip(如192.168.1.26)</code>将<strong>hw_ctree.xml</strong>通过Tftp传输到电脑上<br> 打开之前Tftp你设置的文件夹，发现<strong>hw_ctree.xml</strong>已经下载到电脑上了<br> 直接打开会发现被加密成了二进制文件，强制打开也是乱码，我们需要对其解密<br> <img src=\"/image/Pasted%20image%2020240206121257.png\"><img src=\"/image/Pasted%20image%2020240206121326.png\"></li>\n<li>打开由 欲断魂 大佬制作的解密工具，选择刚刚下载下来的文件，点击解密<br>  <img src=\"/image/Pasted%20image%2020240206121610.png\"></li>\n<li>打开解密后的<strong>hw_ctree.xml</strong><br> <img src=\"/image/Pasted%20image%2020240206121750.png\"><br> 搜索<code>telecomadmin</code>可以看到后面跟着的Password，不过该密码依旧是加密的😅<br> <img src=\"/image/Pasted%20image%2020240206122110.png\"></li>\n<li>复制后面的密文丢到解密软件内，根据密文开头选择解密方式<br> <img src=\"/image/Pasted%20image%2020240206122836.png\"><br> 解密得@!2^WzC2<br> <img src=\"/image/Pasted%20image%2020240206122922.png\"></li>\n</ol>\n<h1 id=\"登录测试\"><a href=\"#登录测试\" class=\"headerlink\" title=\"登录测试\"></a>登录测试</h1><p>用刚刚的密码进行测试<br>成功登录😋<img src=\"/image/Pasted%20image%2020240206123125.png\"><br>插上光纤、其他网线、IPTV和电话线重启光猫<br>可以在安全-ONT访问控制配置关闭Telnet<br><img src=\"/image/Pasted%20image%2020240206123350.png\"></p>\n<h1 id=\"尾声\"><a href=\"#尾声\" class=\"headerlink\" title=\"尾声\"></a>尾声</h1><p>这次只是涉及获取密码所以只是下载配置，如果需要进行修改则需要将配置文件通过Tftp重新上传到光猫并用<code>cp</code>命令进行复制替换，具体操作可以去google or bing一下</p>\n<p>题外话:最近老师那边丢过来一个竞赛刚好最近正在写的一个项目符合要求不过要改一下项目名称带Fuck可不行😋(</p>\n","feature":true,"text":" 前言家里用的是中国电信诈骗的网自然也是用它的光猫 型号版本为HS8145C5 V5.19.C20S050之前超管的密码一直都是默认的nE7jA%5m，结果24...","permalink":"/post/24年通过Telnet获取电信天翼网关超管密码-HS8145C5","photos":[],"count_time":{"symbolsCount":"2.7k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"破解","slug":"破解","count":1,"path":"api/tags/破解.json"},{"name":"网络","slug":"网络","count":1,"path":"api/tags/网络.json"},{"name":"硬件","slug":"硬件","count":1,"path":"api/tags/硬件.json"},{"name":"光猫","slug":"光猫","count":1,"path":"api/tags/光猫.json"},{"name":"骚操作","slug":"骚操作","count":1,"path":"api/tags/骚操作.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%89%8D%E8%A8%80\"><span class=\"toc-text\">前言</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\"><span class=\"toc-text\">准备工作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%B3%BB%E7%BB%9F%E5%87%86%E5%A4%87\"><span class=\"toc-text\">系统准备</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BD%AF%E4%BB%B6%E5%87%86%E5%A4%87\"><span class=\"toc-text\">软件准备</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%90%AFTelnet\"><span class=\"toc-text\">开启Telnet</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%BF%87Telnet%E8%BF%9E%E6%8E%A5%E5%85%89%E7%8C%AB%E5%B9%B6%E8%8E%B7%E5%8F%96%E6%9D%83%E9%99%90\"><span class=\"toc-text\">通过Telnet连接光猫并获取权限</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%80%9A%E8%BF%87Telnet-amp-Tftp64%E8%8E%B7%E5%8F%96%E5%85%89%E7%8C%AB%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">通过Telnet&amp;Tftp64获取光猫配置文件</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%99%BB%E5%BD%95%E6%B5%8B%E8%AF%95\"><span class=\"toc-text\">登录测试</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%B0%BE%E5%A3%B0\"><span class=\"toc-text\">尾声</span></a></li></ol>","author":{"name":"志成zhi_cheng","slug":"blog-author","avatar":"/image/ZCLOGO.jpg","link":"/","description":"一个啥都整的Minecraft玩家 现SLATT成员 17岁 会点JAVA、Python","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/data/svg/bilibili.svg","link":"https://space.bilibili.com/350354944"},"Github":{"icon":"/data/svg/github.svg","link":"https://github.com/zhicheng233"},"QQ":{"icon":"/data/svg/QQ.svg","link":"http://wpa.qq.com/msgrd?v=3&uin=2473367376&site=qq&menu=yes"},"DC":{"icon":"/data/svg/discord.svg","link":"https://discord.gg/Q7jfUne2C5"}}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"浅谈V2rayN & Cloudfare Zero Trust","uid":"59109de0854ca2b0366ba95f91c80871","slug":"浅谈V2ray & Cloudfare Zero Trust","date":"2023-12-08T16:00:00.000Z","updated":"2023-12-16T13:03:59.259Z","comments":true,"path":"api/articles/浅谈V2ray & Cloudfare Zero Trust.json","keywords":null,"cover":"/image/79731173_p0.jpg.png","text":" 前言去年11月份介绍过通过使用 Cloudflare CDN 以达到绕过GFW的方法，但该方法特别挑网站同时效果也不怎么好，本期我们来详细讲讲这个GFW该如何...","permalink":"/post/浅谈V2ray & Cloudfare Zero Trust","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"教程","slug":"教程","count":3,"path":"api/tags/教程.json"},{"name":"GFW","slug":"GFW","count":1,"path":"api/tags/GFW.json"},{"name":"软件分享","slug":"软件分享","count":1,"path":"api/tags/软件分享.json"}],"author":{"name":"志成zhi_cheng","slug":"blog-author","avatar":"/image/ZCLOGO.jpg","link":"/","description":"一个啥都整的Minecraft玩家 现SLATT成员 17岁 会点JAVA、Python","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/data/svg/bilibili.svg","link":"https://space.bilibili.com/350354944"},"Github":{"icon":"/data/svg/github.svg","link":"https://github.com/zhicheng233"},"QQ":{"icon":"/data/svg/QQ.svg","link":"http://wpa.qq.com/msgrd?v=3&uin=2473367376&site=qq&menu=yes"},"DC":{"icon":"/data/svg/discord.svg","link":"https://discord.gg/Q7jfUne2C5"}}}},"feature":true}}